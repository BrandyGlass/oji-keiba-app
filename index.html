<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light dark" />
  <title>ãŠã˜.exeï¼ˆä¸­å±±ãƒ€1800ï¼‰</title>
  <style>
    :root{
      --bg:#f6f7f9; --card:#fff; --text:#111; --sub:#555; --line:#e6e8ee;
      --pri:#111; --priText:#fff; --soft:#f2f3f6; --warn:#ffefef; --warnLine:#ffb8b8;
      --radius:14px; --pad:16px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0f1115; --card:#151922; --text:#eef1f6; --sub:#aab3c2; --line:#2a3140;
        --pri:#eef1f6; --priText:#0f1115; --soft:#1b2130; --warn:#2a1616; --warnLine:#7a3333;
      }
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Hiragino Sans","Noto Sans JP",system-ui,Segoe UI,Roboto,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{max-width:780px;margin:0 auto;padding:calc(env(safe-area-inset-top) + 14px) var(--pad) calc(env(safe-area-inset-bottom) + 18px);}
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:var(--pad);
      box-shadow:0 10px 26px rgba(0,0,0,.06);
      margin:12px 0;
    }
    h1{font-size:20px;margin:0 0 6px;}
    .sub{font-size:13px;color:var(--sub);line-height:1.5;margin:0 0 10px;}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 2px;}
    .chip{background:var(--soft);border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px;color:var(--sub);}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    @media (max-width:520px){.grid{grid-template-columns:1fr}}
    label{display:block;font-size:13px;color:var(--sub);margin:10px 0 6px;}
    input,select,textarea{
      width:100%;
      padding:12px 12px;
      border:1px solid var(--line);
      border-radius:12px;
      background:transparent;
      color:var(--text);
      font-size:16px;
      outline:none;
    }
    textarea{min-height:78px;resize:vertical}
    .q{
      font-size:18px;
      margin:12px 0 10px;
      font-weight:700;
    }
    .row{display:flex;gap:10px;flex-wrap:wrap;}
    button{
      flex:1;
      min-width:140px;
      padding:14px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:transparent;
      color:var(--text);
      font-size:16px;
      font-weight:700;
      cursor:pointer;
    }
    button.primary{background:var(--pri);color:var(--priText);border-color:transparent;}
    button.soft{background:var(--soft);}
    button.danger{background:var(--warn);border-color:var(--warnLine);}
    .result{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:linear-gradient(180deg, rgba(0,0,0,.02), transparent);
      margin-top:10px;
    }
    .big{font-size:18px;font-weight:900;margin:0 0 6px;}
    .small{font-size:13px;color:var(--sub);margin:0;line-height:1.5;}
    .sep{height:1px;background:var(--line);margin:14px 0;}
    .logHead{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;}
    .logList{margin:10px 0 0;padding:0;list-style:none;}
    .logItem{border-top:1px solid var(--line);padding:10px 0;}
    .logItem:first-child{border-top:none;padding-top:0;}
    .tag{display:inline-block;font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid var(--line);background:var(--soft);color:var(--sub);margin-right:6px;}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;}
    .hint{font-size:12px;color:var(--sub);margin-top:8px}
    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:rgba(0,0,0,.82);color:#fff;
      padding:10px 12px;border-radius:12px;font-size:13px;
      opacity:0;pointer-events:none;transition:.2s;
    }
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <div class="wrap">

    <div class="card">
      <h1>ãŠã˜.exeï¼ˆä¸­å±±ãƒ€1800ï¼‰</h1>
      <p class="sub">
        ç›®çš„ï¼šè¿·ã‚ãªã„ï¼æ„Ÿæƒ…ã§è²·ã‚ãªã„ï¼æ±ºã‚ãŸæ‰‹é †é€šã‚Šã«å‹•ã<br>
        â€»ãƒ­ã‚°ã¯ç«¯æœ«å†…ï¼ˆã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã ã‘ã«ä¿å­˜ã€‚å¤–ã«é€ã‚‰ãªã„ã€‚
      </p>
      <div class="chips">
        <span class="chip">å›ºå®šï¼šè¤‡å‹1ç‚¹</span>
        <span class="chip">1R 500å††</span>
        <span class="chip">å€™è£œ æœ€å¤§3é ­</span>
        <span class="chip">è¿·ã£ãŸã‚‰ è¦‹é€ã‚Š</span>
      </div>

      <div class="sep"></div>

      <label>ãƒ¬ãƒ¼ã‚¹åï¼ˆãƒ­ã‚°ç”¨ï¼‰</label>
      <input id="raceName" placeholder="ä¾‹ï¼š1/18 ä¸­å±±10R ãªã©" />

      <div class="grid">
        <div>
          <label>é¦¬å ´</label>
          <select id="cond">
            <option value="è‰¯">è‰¯</option>
            <option value="ç¨é‡">ç¨é‡</option>
            <option value="é‡">é‡</option>
            <option value="ä¸è‰¯">ä¸è‰¯</option>
          </select>
        </div>
        <div>
          <label>é ­æ•°</label>
          <input id="heads" type="number" inputmode="numeric" min="1" max="18" placeholder="ä¾‹ï¼š16" />
        </div>
      </div>

      <div class="sep"></div>

      <div id="flow"></div>

      <div class="sep"></div>

      <div class="row">
        <button class="soft" id="btnBack" type="button">ã²ã¨ã¤æˆ»ã‚‹</button>
        <button class="soft" id="btnReset" type="button">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <p class="hint">â€»ã€Œã²ã¨ã¤æˆ»ã‚‹ã€ã¯ã“ã®ã‚¢ãƒ—ãƒªå†…ã®æˆ»ã‚‹ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®æˆ»ã‚‹ã˜ã‚ƒãªã„ï¼‰</p>
    </div>

    <div class="card">
      <div class="logHead">
        <div>
          <div style="font-weight:900;">ğŸ—’ï¸ ãƒ­ã‚°ï¼ˆç«¯æœ«å†…ã«ä¿å­˜ï¼‰</div>
          <div class="sub" style="margin:4px 0 0;">è²·ã†ï¼è¦‹é€ã‚Š ã¨ã€Œæ­¢ã¾ã£ãŸç†ç”±ãƒ»è² ã‘ç­‹ã€ã ã‘æ®‹ã™</div>
        </div>
        <div class="row" style="flex:0 0 auto;">
          <button class="soft" id="btnCopyCsv" type="button">CSVã‚³ãƒ”ãƒ¼</button>
          <button class="danger" id="btnClearLog" type="button">ãƒ­ã‚°å…¨æ¶ˆã—</button>
        </div>
      </div>
      <ul id="logList" class="logList"></ul>
      <div id="logEmpty" class="sub" style="margin-top:10px;">ã¾ã ãƒ­ã‚°ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</div>
    </div>

  </div>

  <div id="toast" class="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ</div>

  <script>
    "use strict";

    // ====== State ======
    const state = {
      step: "q_course",
      history: [],
      // input snapshot
      raceName: "",
      cond: "è‰¯",
      heads: null,
      // computed
      extremeHint: null,
      // result
      decision: null,   // "BUY" | "SKIP"
      reason: ""
    };

    const $ = (id)=>document.getElementById(id);

    const elFlow = $("flow");
    const elRace = $("raceName");
    const elCond = $("cond");
    const elHeads = $("heads");
    const btnBack = $("btnBack");
    const btnReset = $("btnReset");
    const btnCopyCsv = $("btnCopyCsv");
    const btnClearLog = $("btnClearLog");
    const elLogList = $("logList");
    const elLogEmpty = $("logEmpty");
    const elToast = $("toast");

    // ====== Log ======
    const LOG_KEY = "oji_keiba_log_v1";

    function loadLog(){
      try{
        const raw = localStorage.getItem(LOG_KEY);
        return raw ? JSON.parse(raw) : [];
      }catch(e){
        return [];
      }
    }
    function saveLog(items){
      localStorage.setItem(LOG_KEY, JSON.stringify(items));
    }

    function nowIso(){
      const d = new Date();
      const pad = (n)=>String(n).padStart(2,"0");
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
    }

    function addLogEntry(entry){
      const items = loadLog();
      items.unshift(entry);
      saveLog(items);
      renderLog();
    }

    function renderLog(){
      const items = loadLog();
      elLogList.innerHTML = "";
      elLogEmpty.style.display = items.length ? "none" : "block";

      for(const it of items){
        const li = document.createElement("li");
        li.className = "logItem";
        const tags = [
          `<span class="tag">${it.decision === "BUY" ? "è²·ã†" : "è¦‹é€ã‚Š"}</span>`,
          it.cond ? `<span class="tag">${escapeHtml(it.cond)}</span>` : "",
          (it.heads != null && it.heads !== "") ? `<span class="tag">${escapeHtml(String(it.heads))}é ­</span>` : ""
        ].join("");
        li.innerHTML = `
          <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;">
            <div style="font-weight:800;">${escapeHtml(it.raceName || "(ãƒ¬ãƒ¼ã‚¹åãªã—)")}</div>
            <div class="sub mono">${escapeHtml(it.ts)}</div>
          </div>
          <div style="margin-top:6px;">${tags}</div>
          <div class="sub" style="margin-top:6px;white-space:pre-wrap;">${escapeHtml(it.reason || "")}</div>
        `;
        elLogList.appendChild(li);
      }
    }

    function toCsv(items){
      const header = ["ts","raceName","cond","heads","decision","reason"];
      const rows = [header];
      for(const it of items){
        rows.push([
          it.ts || "",
          it.raceName || "",
          it.cond || "",
          (it.heads==null ? "" : String(it.heads)),
          it.decision || "",
          (it.reason || "").replace(/\r?\n/g, " ")
        ]);
      }
      return rows.map(r => r.map(csvCell).join(",")).join("\n");
    }
    function csvCell(s){
      const v = String(s ?? "");
      if(/[",\n]/.test(v)) return `"${v.replace(/"/g,'""')}"`;
      return v;
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("CSVã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("CSVã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
      }
    }

    function toast(msg){
      elToast.textContent = msg;
      elToast.classList.add("show");
      setTimeout(()=>elToast.classList.remove("show"), 1400);
    }

    function escapeHtml(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#39;");
    }

    // ====== Flow helpers ======
    function snapshot(){
      return JSON.parse(JSON.stringify(state));
    }
    function restore(snap){
      // keep functions out; snap is plain
      for(const k of Object.keys(state)){
        delete state[k];
      }
      Object.assign(state, snap);
      render();
    }
    function pushHistory(){
      state.history.push(snapshot());
      if(state.history.length > 50) state.history.shift();
    }

    function readInputs(){
      state.raceName = (elRace.value || "").trim();
      state.cond = elCond.value;
      const h = elHeads.value === "" ? null : Number(elHeads.value);
      state.heads = Number.isFinite(h) ? h : null;

      // hint: extreme if many heads or heavy track
      const heads = state.heads;
      const cond = state.cond;
      const many = (heads != null && heads >= 15);
      const few  = (heads != null && heads <= 10);
      const heavy = (cond === "é‡" || cond === "ä¸è‰¯");
      state.extremeHint = (many || few || heavy) ? "æ¥µç«¯" : "æ™®é€š";
    }

    // ====== Render ======
    function render(){
      readInputs();

      btnBack.disabled = state.history.length === 0;
      btnBack.style.opacity = btnBack.disabled ? "0.5" : "1";

      elFlow.innerHTML = "";
      if(state.step === "q_course"){
        renderQCourse();
      }else if(state.step === "q_extreme"){
        renderQExtreme();
      }else if(state.step === "q_pattern"){
        renderQPattern();
      }else if(state.step === "result"){
        renderResult();
      }
    }

    function renderQCourse(){
      elFlow.appendChild(qBlock(
        "ã€è²·ã†è³‡æ ¼ã€‘ ã“ã®ãƒ¬ãƒ¼ã‚¹ã¯ä¸­å±±ãƒ€1800ï¼Ÿ",
        [
          btn("ã¯ã„", "primary", ()=>goYesCourse()),
          btn("ã„ã„ãˆ", "soft", ()=>goNoCourse())
        ],
        hintBlock("â€» å¯¾è±¡å¤–ãªã‚‰å³ã€Œè¦‹é€ã‚Šã€")
      ));
    }

    function goYesCourse(){
      pushHistory();
      state.step = "q_extreme";
      state.decision = null;
      state.reason = "";
      render();
    }

    function goNoCourse(){
      pushHistory();
      state.step = "result";
      state.decision = "SKIP";
      state.reason = "å¯¾è±¡å¤–ï¼ˆä¸­å±±ãƒ€1800ã§ã¯ãªã„ï¼‰";
      render();
    }

    function renderQExtreme(){
      const hint = state.extremeHint;
      const msg = `å…¥åŠ›å€¤ã‹ã‚‰ã®åˆ¤å®šï¼š${hint || "ä¸æ˜"}ï¼ˆé ­æ•°ã¨é¦¬å ´ï¼‰`;
      elFlow.appendChild(qBlock(
        "ã€çŠ¶æ³ã€‘ é ­æ•°ãƒ»é¦¬å ´ã¯â€œæ¥µç«¯â€ï¼Ÿ",
        [
          btn("ã¯ã„ï¼ˆæ¥µç«¯ï¼‰", "primary", ()=>goExtreme(true)),
          btn("ã„ã„ãˆï¼ˆæ™®é€šï¼‰", "soft", ()=>goExtreme(false))
        ],
        hintBlock(`ãƒ’ãƒ³ãƒˆï¼š${msg}\nãƒ»æ¥µç«¯ï¼ã€Œå¤šã„(15+) / å°‘ãªã„(ã€œ10) / é‡ãƒ»ä¸è‰¯ã€ãªã©`)
      ));
    }

    function goExtreme(isExtreme){
      pushHistory();
      // ã“ã“ã¯å‹ã®å…¥å£ã€‚æ¥µç«¯ãªã‚‰ã€Œè²·ã†ã‚¾ãƒ¼ãƒ³ã€å¯„ã‚Šã€æ™®é€šãªã‚‰æ…é‡ã€‚
      state.step = "q_pattern";
      state.decision = null;
      state.reason = isExtreme
        ? "æ¥µç«¯æ¡ä»¶ï¼ˆå¤šé ­ or é“æ‚ª ãªã©ï¼‰â†’ ãƒ‘ã‚¿ãƒ¼ãƒ³ã¸"
        : "æ™®é€šæ¡ä»¶ â†’ è¿·ã£ãŸã‚‰è¦‹é€ã‚Šå‰æã§ãƒ‘ã‚¿ãƒ¼ãƒ³ã¸";
      state._isExtreme = isExtreme;
      render();
    }

    function renderQPattern(){
      const isExtreme = !!state._isExtreme;
      const head = isExtreme
        ? "ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘ ã©ã®å‹ã¡ç­‹ã§è²·ã†ï¼Ÿï¼ˆæ¥µç«¯æ¡ä»¶ï¼‰"
        : "ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‘ ã©ã®å‹ã¡ç­‹ã§è²·ã†ï¼Ÿï¼ˆæ™®é€šæ¡ä»¶ï¼‰";

      const sub = isExtreme
        ? "æ¥µç«¯ï¼å±•é–‹ãƒ–ãƒ¬ãŒå¤§ãã„ã€‚å‹ã¡ç­‹ã‚’1ã¤ã«å›ºå®šã—ã¦è¿·ã„ã‚’æ¸›ã‚‰ã™ã€‚"
        : "æ™®é€šï¼å„ªä½ãŒè–„ã„ã“ã¨ãŒå¤šã„ã€‚è‡ªä¿¡ãŒãªã‘ã‚Œã°è¦‹é€ã‚Šã€‚";

      const box = document.createElement("div");
      box.className = "card";
      box.innerHTML = `
        <div class="q">${escapeHtml(head)}</div>
        <div class="sub">${escapeHtml(sub)}</div>
        <div class="row" style="margin-top:10px;">
          <button class="primary" id="pA">Aï¼šå‰ç›®ã§æŠ¼ã—åˆ‡ã‚Š</button>
          <button class="soft" id="pB">Bï¼šå·®ã—å±Šãæƒ³å®š</button>
          <button class="soft" id="pC">Cï¼šæ··æˆ¦â†’å®‰å…¨ã«è¦‹é€ã‚Š</button>
        </div>
        <label style="margin-top:12px;">æ­¢ã¾ã£ãŸç†ç”±ãƒ»è² ã‘ç­‹ï¼ˆ1ã¤ã ã‘ï¼‰</label>
        <textarea id="reasonBox" placeholder="ä¾‹ï¼šåŒå‹ãŒå¤šãã¦å…ˆè¡Œäº‰ã„â†’æ½°ã‚Œã‚‹"></textarea>
        <div class="row" style="margin-top:10px;">
          <button class="soft" id="btnBuy">ã“ã®å†…å®¹ã§ã€è²·ã†ã€</button>
          <button class="danger" id="btnSkip">ã€è¦‹é€ã‚Šã€ã«ã™ã‚‹</button>
        </div>
        <p class="hint">â€»ã€è²·ã†ã€ã§ã‚‚åˆ¸ç¨®ãƒ»é‡‘é¡ã¯å›ºå®šï¼ˆè¤‡å‹1ç‚¹ï¼500å††ï¼‰</p>
      `;
      elFlow.appendChild(box);

      const pA = $("pA");
      const pB = $("pB");
      const pC = $("pC");
      const reasonBox = $("reasonBox");
      const btnBuy = $("btnBuy");
      const btnSkip = $("btnSkip");

      let picked = null;

      function pick(x){
        picked = x;
        // UI
        pA.className = (x==="A") ? "primary" : "soft";
        pB.className = (x==="B") ? "primary" : "soft";
        pC.className = (x==="C") ? "primary" : "soft";

        if(x==="C"){
          btnBuy.textContent = "ï¼ˆè¦‹é€ã‚Šæ¨å¥¨ï¼‰ã§ã‚‚è²·ã†ãªã‚‰è²·ã†";
        }else{
          btnBuy.textContent = "ã“ã®å†…å®¹ã§ã€è²·ã†ã€";
        }
      }

      pA.onclick = ()=>pick("A");
      pB.onclick = ()=>pick("B");
      pC.onclick = ()=>pick("C");

      // default
      pick(isExtreme ? "A" : "C");

      btnBuy.onclick = ()=>{
        pushHistory();
        state.step = "result";
        state.decision = "BUY";
        const extra = reasonBox.value.trim();
        state.reason = `ãƒ‘ã‚¿ãƒ¼ãƒ³${picked}ã§è²·ã†ã€‚` + (extra ? ` è² ã‘ç­‹ï¼š${extra}` : "");
        render();
      };

      btnSkip.onclick = ()=>{
        pushHistory();
        state.step = "result";
        state.decision = "SKIP";
        const extra = reasonBox.value.trim();
        state.reason = `è¦‹é€ã‚Šã€‚` + (extra ? ` ç†ç”±ï¼š${extra}` : "");
        render();
      };
    }

    function renderResult(){
      const decision = state.decision || "SKIP";
      const isBuy = decision === "BUY";

      const box = document.createElement("div");
      box.className = "card";
      box.innerHTML = `
        <div class="result">
          <p class="big">${isBuy ? "çµè«–ï¼šè²·ã†ï¼ˆè¤‡å‹1ç‚¹ï¼500å††ï¼‰" : "çµè«–ï¼šè¦‹é€ã‚Š"}</p>
          <p class="small">${escapeHtml(summaryLine())}</p>
          <div class="sep"></div>
          <div class="sub" style="white-space:pre-wrap;">${escapeHtml(state.reason || "")}</div>
          <div class="sep"></div>
          <div class="row">
            <button class="primary" id="btnSave">ãƒ­ã‚°ã«ä¿å­˜</button>
            <button class="soft" id="btnAgain">ã‚‚ã†ä¸€åº¦ï¼ˆæœ€åˆã¸ï¼‰</button>
          </div>
        </div>
      `;
      elFlow.appendChild(box);

      $("btnSave").onclick = ()=>{
        addLogEntry({
          ts: nowIso(),
          raceName: state.raceName,
          cond: state.cond,
          heads: state.heads,
          decision: state.decision || "SKIP",
          reason: state.reason || ""
        });
        toast("ãƒ­ã‚°ã«ä¿å­˜ã—ã¾ã—ãŸ");
      };

      $("btnAgain").onclick = ()=>{
        resetAll();
      };
    }

    function summaryLine(){
      const parts = [];
      if(state.raceName) parts.push(state.raceName);
      if(state.cond) parts.push(`é¦¬å ´:${state.cond}`);
      if(state.heads != null) parts.push(`${state.heads}é ­`);
      return parts.join(" / ");
    }

    // ====== UI helpers ======
    function qBlock(title, buttons, hintEl){
      const box = document.createElement("div");
      box.className = "card";
      const q = document.createElement("div");
      q.className = "q";
      q.textContent = title;
      box.appendChild(q);

      const row = document.createElement("div");
      row.className = "row";
      for(const b of buttons) row.appendChild(b);
      box.appendChild(row);

      if(hintEl) box.appendChild(hintEl);
      return box;
    }

    function hintBlock(text){
      const p = document.createElement("div");
      p.className = "hint";
      p.style.whiteSpace = "pre-wrap";
      p.textContent = text;
      return p;
    }

    function btn(text, cls, onClick){
      const b = document.createElement("button");
      b.type = "button";
      b.className = cls || "soft";
      b.textContent = text;
      b.onclick = onClick;
      return b;
    }

    // ====== Controls ======
    function resetAll(){
      state.step = "q_course";
      state.history = [];
      state.decision = null;
      state.reason = "";
      state._isExtreme = false;
      render();
    }

    btnBack.onclick = ()=>{
      if(!state.history.length) return;
      const snap = state.history.pop();
      restore(snap);
    };

    btnReset.onclick = ()=>resetAll();

    btnCopyCsv.onclick = async ()=>{
      const items = loadLog();
      const csv = toCsv(items);
      await copyText(csv);
    };

    btnClearLog.onclick = ()=>{
      if(!confirm("ãƒ­ã‚°ã‚’å…¨éƒ¨æ¶ˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")) return;
      saveLog([]);
      renderLog();
      toast("ãƒ­ã‚°ã‚’æ¶ˆã—ã¾ã—ãŸ");
    };

    // Re-render when inputs change (lightweight)
    elRace.addEventListener("input", ()=>{ /* no-op */ });
    elCond.addEventListener("change", ()=>render());
    elHeads.addEventListener("input", ()=>render());

    // init
    renderLog();
    render();
  </script>
</body>
</html>
